# Webサービス開発でのモデル選択フロー（Flutter＋Nest.js／Next.js）

対象: スプレッドオフィス社／立替精算SaaS（Fポータル拡張）  
目的: どの作業でどのモデルを使うかを定型化し、品質と速度、コスト（上限）を最適化する。

---

## 主要モデルの前提
- **GPT-5（標準）**: 日常の実装・コード生成・リファクタ・単体テスト作成の主力。高速・枠に余裕。
- **GPT-5 Thinking**: 長考で要件定義や設計レビュー、複雑な仕様の整合性チェック、長文ドキュメント整理に最適。
- **GPT-5 Pro**: 研究グレード。月間回数が少ないため切り札（厳密なアルゴリズム設計、法務・規約整合など）。

---

## フェーズ別プレイブック
### 要件定義/UX設計（Thinking）
- ユースケース、権限、画面/フロー、非機能を整理  
- 曖昧さを洗い出して代替案を提示

### 実装（標準 GPT-5）
- Nest.js モジュール、DTO、Prismaスキーマ、Jestテスト  
- Flutter UI/状態管理、Riverpod/Bloc、Widgetテスト

### 高リスク領域（Pro）
- 消費税ロジック、監査ログ/改ざん対策、法令適合性の検証  
- 最終レビューにのみ使用

---

## タスク別ルーティング表

| タスク | 推奨モデル | 補足 |
|---|---|---|
| 画面フロー作成・権限マトリクス | Thinking | 網羅性重視 |
| DB設計/正規化 | Thinking → 標準 | 長考で設計 → DDL生成 |
| Flutter 実装 | 標準 | 日常開発の主力 |
| APIハンドラ/DTO | 標準 | 型安全・テスト込み |
| 監査ログ/改ざん対策 | Pro | 回数節約のため最後に1回 |
| 法令対応要件精査 | Pro | 保存年限・証憑要件 |

---

## 運用ルール
- **標準**: 基本はこれ。Thinking/Pro の使用は GitHub の PR ラベル `needs-thinking` / `needs-pro` で管理
- **Thinking**: 週次枠を想定。テーマごとに小分けして利用
- **Pro**: 月次枠を可視化。使用時は必ず検証観点を記録

---
