# SECURITY POLICY — セキュリティ方針（dev_app）

## 0. 目的と適用範囲
本ポリシーは dev_app のシステム/データ/運用に適用され、顧客情報と証憑データを安全に取り扱うことを目的とします。

## 1. データ分類
- 機密（PII/請求情報/証憑画像）
- 内部限定（運用ログ/設定）
- 公開（ドキュメントの一部）

## 2. 認証・認可
- 認証: Amazon Cognito（SSO対応）
- 認可: RBAC（roles: user, approver, accountant, admin）
- API は Bearer JWT（短寿命）を検証。スコープ/クレームで権限制御。

## 3. 暗号化
- 転送中: TLS 1.2+（推奨 1.3）
- 保存時: KMS による RDS/S3/ログの暗号化
- 鍵管理: KMS キーのローテーションとアクセス制御

## 4. ログ・監査
- 重要操作は監査ログへ（ID/時刻/操作/結果）
- CloudTrail/CloudWatch/X-Ray を活用。S3 に 7 年保管（ライフサイクル管理）
- 個人データはログに残さない（必要時はマスキング）

## 5. ストレージ（S3）
- バージョニング有効化、パブリックブロック有効
- 署名付きURLでアップロード/取得
- 改ざん検知のため添付ファイルにハッシュ/メタ付与

## 6. 脆弱性と依存管理
- 依存スキャン（CI連携）
- 重大脆弱性は優先度P0で対応（SLAは運用規程参照）

## 7. シークレット管理
- 本番: Secrets Manager / SSM Parameter Store
- リポジトリへの secrets のコミット禁止
- ローカルは .env（Git管理外）

## 8. インシデント対応（要約）
- 検知 → 初動（影響範囲/封じ込め）→ 復旧 → 再発防止策の記録
- 監査証跡（チケット/時系列ログ）を必ず残す

## 9. データ保持・削除
- 証憑/監査ログは 7 年保持
- 顧客からの削除/エクスポート要求に応じるプロセスを整備

## 10. 連絡窓口
- セキュリティ連絡: security@yourdomain.example
- もしくはリポジトリの「Security advisories」を使用
